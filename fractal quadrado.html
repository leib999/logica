<canvas width="800" height="800"></canvas>

<script>
	
	function desenhar_triangulo (x, y, cor){ //desenha um triangulo com as coordenadas especificadas nos vetores "x" e "y", com a cor "cor"
		pincel.fillStyle = cor;
		pincel.beginPath();
		pincel.moveTo(x[0], y[0]);
		pincel.lineTo(x[1], y[1]);
		pincel.lineTo(x[2], y[2]);
		pincel.fill();
	}
	
	function iterar(x, y, f){
		var tx = [x[0], ((x[2]-x[0])/2), ((x[2]-x[0])/2)];
		var ty = [((y[2]-y[0])/2), y[2], ((y[2]-y[0])/2)];
		desenhar_triangulo(tx, ty, "black");
		if (f > 0){
			f--; //reduz o contador de iterações
			//cria os vetores com as coordenadas dos próximos 3 triangulos
			var x1 = [tx[0], tx[0], ((tx[2]-tx[0])/2)];
			var y1 = [ty[0], ((ty[2]-ty[0])/2), ((ty[2]-ty[0])/2)];
			var x2 = [tx[0], tx[0], ((tx[2]-tx[0])/2)];
			var y2 = [((ty[2]-ty[0])/2), ty[2], ty[2]];
			var x3 = [((tx[2]-tx[0])/2), ((tx[2]-tx[0])/2), tx[2]];
			var y3 = [((ty[2]-ty[0])/2), ty[2], ty[2]];
			iterar(x1, y1, f);
			iterar(x2, y2, f);
			iterar(x3, y3, f);
		}
	}

	var tela = document.querySelector('canvas');
	var pincel = tela.getContext('2d');
	
	var largura = 500;
	var altura = 500;
	
	pincel.fillStyle = 'green';
	pincel.fillRect(0, 0, 500, 500);
	x_t1 = [0, 0, largura]; //coordenadas x do triangulo 1, começando pelo ponto superior e girando em sentido antihorário
	y_t1 = [0, altura, altura];  //coordenadas y do triangulo 1, começando pelo ponto superior e girando em sentido antihorário
	desenhar_triangulo(x_t1, y_t1, "white"); //triangulo inicial t1: ocupa metade do canvas
	iterar(x_t1, y_t1, 1); //gera o fractal	
	
</script>